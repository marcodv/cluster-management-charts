# Default values for monitoring.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

grafana:
  namespaceOverride: monitoring
  rbac:
    create: true
    pspEnabled: true
    pspUseAppArmor: true
    namespaced: true
  serviceAccount:
    create: true
    name: grafana

  replicas: 1

  # Administrator credentials when not using an existing secret (see below)
  admin:
    user: "grafana-dev-env-noah"
    #assumeRoleArn: arn:aws:iam::848481299679:role/grafanaRoledevEnv
    password: "Marcotesting123"  





  downloadDashboardsImage:
    repository: curlimages/curl
    tag: 7.70.0
    sha: ""
    pullPolicy: IfNotPresent

  downloadDashboards:
    env: {}
    resources: {}

  podLabels:
    app: grafana

  podPortName: grafana

  ## Security context for Grafana to run
  securityContext:
    runAsUser: 472
    runAsGroup: 472
    fsGroup: 472



  ## This allows the prometheus-server to be run with an arbitrary user
  ##
  initChownData:
    enabled: true
    ## initChownData container image
    ##
    image:
      repository: busybox
      tag: "1.31.1"
      sha: ""
      pullPolicy: IfNotPresent

  ## Grafana's primary configuration
  ## NOTE: values in map will be converted to ini format
  ## ref: http://docs.grafana.org/installation/configuration/
  ##
  grafana.ini:
    paths:
      data: /var/lib/grafana/data
      logs: /var/log/grafana
      plugins: /var/lib/grafana/plugins
      provisioning: /etc/grafana/provisioning
    analytics:
      check_for_updates: true
    log:
      mode: console
    grafana_net:
      url:
        https://grafana.com



  ## Configure grafana datasources
  ## ref: http://docs.grafana.org/administration/provisioning/#datasources
  ##
datasources:
  datasources.yaml:
    apiVersion: 1
    datasources:
      - name: Prometheus
        type: prometheus
        url: http://monitoring-prometheus-server.monitoring.svc.cluster.local
        access: proxy
        isDefault: true
      - name: CloudWatch
        type: cloudwatch
        jsonData:
          defaultRegion: eu-west-1
          authType: default
          assumeRoleArn: 

datasources:
  datasource.yaml:
    apiVersion: 1
    datasources:
      - name: Prometheus
        type: prometheus
        url: http://monitoring-prometheus-server.monitoring.svc.cluster.local
        access: proxy
        isDefault: true
        editable: false


dashboardProviders:
  dashboardproviders.yaml:
    apiVersion: 1
    providers:
      - name: default
        orgId: 1
        folder: 
        type: file
        disableDeletion: true
        editable: true
        options:
          #path: /var/lib/grafana/dashboards/default
          path: /opt/bitnami/grafana/dashboards

dashboards:
  default:
    prometheus-stats:
      gnetId: 10000
      revision: 1
      datasource: Prometheus
    cluster-metrics:
      gnetId: 6417
      revision: 1
      datasource: Prometheus
    persistent-volumes:
      gnetId: 6739
      revision: 1
      datasource: Prometheus
    traefik:
      gnetId: 4475
      revision: 5
      datasource: Prometheus
